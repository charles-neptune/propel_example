FORM display_msgs
  USING    i_title TYPE string
  CHANGING ct_ret  TYPE STANDARD TABLE.

  DATA: lo_alv TYPE REF TO cl_salv_table.

  IF ct_ret IS INITIAL.
    MESSAGE 'No messages returned.' TYPE 'S'.
    RETURN.
  ENDIF.

  TRY.
      cl_salv_table=>factory(
        IMPORTING
          r_salv_table = lo_alv
        CHANGING
          t_table      = ct_ret ).

      lo_alv->get_functions( )->set_all( abap_true ).
      lo_alv->get_display_settings( )->set_list_header( i_title ).

      "Popup size/position (rows/cols)
      lo_alv->set_screen_popup(
        start_column = 5
        end_column   = 120
        start_line   = 2
        end_line     = 25 ).

      lo_alv->display( ).

    CATCH cx_root INTO DATA(lx).
      MESSAGE lx->get_text( ) TYPE 'E'.
  ENDTRY.

ENDFORM.
